<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>hello connect</title>

<script src="//code.jquery.com/jquery-1.10.2.js"></script>

<!--
<script src="//underscorejs.org/underscore-min.js"></script>
<script src="//backbonejs.org/backbone-min.js"></script>
-->

<script src="//requirejs.org/docs/release/2.1.8/minified/require.js"></script>
<!-- #1 注目 -->
<script src="assets/js/requires/base.js"></script>
<!--
通常
<script src="assets/js/requires/test.js"></script>
-->
<!--
minify
-->
<script src="assets/js/min/aaaaaaaa.js"></script>


<script src="http://html2canvas.hertzen.com/build/html2canvas.js"></script>

<script>
/*
function saveCanvas(canvas, destFile) {

// ファイルパス文字列を nsIFile に変換する
var file = Components.classes["@mozilla.org/file/local;1"]
.createInstance(Components.interfaces.nsILocalFile);
file.initWithPath(destFile);

// canvas からデータ URL 形式を作成し、ソースとターゲットの URI を作成します
var io = Components.classes["@mozilla.org/network/io-service;1"]
.getService(Components.interfaces.nsIIOService);
var source = io.newURI(canvas.toDataURL("image/png", ""), "UTF8", null);
var target = io.newFileURI(file)

// canvas データを保存する準備をします
var persist = Components.classes["@mozilla.org/embedding/browser/nsWebBrowserPersist;1"]
.createInstance(Components.interfaces.nsIWebBrowserPersist);

persist.persistFlags = Components.interfaces.nsIWebBrowserPersist.PERSIST_FLAGS_REPLACE_EXISTING_FILES;
persist.persistFlags |= Components.interfaces.nsIWebBrowserPersist.PERSIST_FLAGS_AUTODETECT_APPLY_CONVERSION;

// canvas データをファイルに保存します
persist.saveURI(source, null, null, null, null, file);
}

function createImage() {
  var canvas = document.createElement("canvas");
var height = $(document).height();
var width = $(document).width();
  canvas.setAttribute("height", $(document).height());
  canvas.setAttribute("width", $(document).width());
  var ctx = canvas.getContext("2d");
  ctx.drawWindow(window, 0, 0, width, height, "rgb(0,0,0)");
}

//saveCanvas();
*/
function createImage() {
  html2canvas(document.body, {
    onrendered: function(canvas) {
      var img = '<img src="' + canvas.toDataURL() + '">';
console.log(img);
      $('body').append(img);
    },
    width: 300,
    height: 600
  });
}
</script>

</head>
<body id="body">
hello RequireJS &amp; BackboneJS World!!!

ユーザ情報読み込み中...

<!--
<div id='view'>
index.htmlで最初から表示<br/>
</div>
<button id="btn_test" onClick="createImage()">スクリーンショットを作成</button>

-->
</body>
</html>
